[{"authors":["admin"],"categories":null,"content":"I am currently working at Rescale, Inc. as a Data Engineer. I started programming since high school, and I am proficient in Python, R and SQL and data skills in PySpark, Hive and AWS cloud computing. At Insight Data Science, I developed a few data pipelines to deal with large datasets and heterogeneous data and build the front-end. In the grad school, I built efficient data analysis pipelines and managed 24 graduate and undergraduate students.\n","date":-62135596800,"expirydate":-62135596800,"kind":"taxonomy","lang":"en","lastmod":-62135596800,"objectID":"2525497d367e79493fd32b198b28f040","permalink":"/authors/admin/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/authors/admin/","section":"authors","summary":"I am currently working at Rescale, Inc. as a Data Engineer. I started programming since high school, and I am proficient in Python, R and SQL and data skills in PySpark, Hive and AWS cloud computing. At Insight Data Science, I developed a few data pipelines to deal with large datasets and heterogeneous data and build the front-end. In the grad school, I built efficient data analysis pipelines and managed 24 graduate and undergraduate students.","tags":null,"title":"Runhan Yu","type":"authors"},{"authors":null,"categories":null,"content":"The org-mode code blocks can be used for literate programming and creating executable snippets. There is also a quick way to insert some common code blocks, for example, \u0026lt;s TAB would expand as\n#+BEGIN_SRC #+END_SRC  Thus, it is pretty convenient to insert code blocks or examples.\n在 org-structure-template-alist 这个列表中预置了许多常用结构，如官方文档所示:\n   Key Structure Template     a ‘#+BEGIN_EXPORT ascii’ … ‘#+END_EXPORT’   c ‘#+BEGIN_CENTER’ … ‘#+END_CENTER’   C ‘#+BEGIN_COMMENT’ … ‘#+END_COMMENT’   e ‘#+BEGIN_EXAMPLE’ … ‘#+END_EXAMPLE’   E ‘#+BEGIN_EXPORT’ … ‘#+END_EXPORT’   h ‘#+BEGIN_EXPORT html’ … ‘#+END_EXPORT’   l ‘#+BEGIN_EXPORT latex’ … ‘#+END_EXPORT’   q ‘#+BEGIN_QUOTE’ … ‘#+END_QUOTE’   s ‘#+BEGIN_SRC’ … ‘#+END_SRC’   v ‘#+BEGIN_VERSE’ … ‘#+END_VERSE’    不过有时也会想要自己造个轮子，比如我平时写博客，有时需要插入按键标签 \u0026lt;kbd\u0026gt; 。此时可用 lisp 的 add-to-list 语法来添加新的结构模板：\nadd-to-list symbol element \u0026amp;optional append compare-fn  即\n(add-to-list 'org-structure-template-alist '(\u0026quot;k\u0026quot; \u0026quot;@@html:\u0026lt;kbd\u0026gt;@@?@@html:\u0026lt;/kbd\u0026gt;@@\u0026quot;))  这个语法的优点在于它会对比原列表内的元素以避免添加重复元素。\n这个 add-to-list 语法每次只能添加一个元素进入列表，并不能添加多个元素。而简单执行 append ，则无法避免重复元素的添加。所以我采用 dolist 指令来添加多个元素：\n(dolist (my-org-structure-template '((\u0026quot;k\u0026quot; \u0026quot;@@html:\u0026lt;kbd\u0026gt;@@?@@html:\u0026lt;/kbd\u0026gt;@@\u0026quot;) (\u0026quot;spy\u0026quot; \u0026quot;#+BEGIN_SRC python\\n?\\n#+END_SRC\u0026quot;) (\u0026quot;son\u0026quot; \u0026quot;#+BEGIN_SRC org :eval never-export\\n,?\\n#+END_SRC\u0026quot;))) (add-to-list 'org-structure-template-alist my-org-structure-template))  效果拔群。\n","date":1567641960,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1568915705,"objectID":"7ec5214dbc313ad9dcd14d5d339bb631","permalink":"/post/450.html/","publishdate":"2019-09-04T20:06:00-04:00","relpermalink":"/post/450.html/","section":"post","summary":"The org-mode code blocks can be used for literate programming and creating executable snippets. There is also a quick way to insert some common code blocks, for example, \u0026lt;s TAB would expand as\n#+BEGIN_SRC #+END_SRC  Thus, it is pretty convenient to insert code blocks or examples.\n","tags":["Emacs","Org-mode","lisp"],"title":"Add structure template in Org-mode","type":"post"},{"authors":null,"categories":null,"content":"由于我习惯写中文博客，所以将写博客这件事也转移到 Emacs 后，我渐渐感觉到 pyim 的不足。所以今天研究一下如何让 pyim 调用 Rime 的词库。\n基础配置  首先安装鼠须管，此一节可见 鼠须管傻瓜化配置，一句话概括呢就是：\nbrew cask install squirrel  然后参考前人经验，下载 librime 获取源码并从鼠须管中获取编译好的 librime.dylib:\ncd ~ git clone --recursive https://github.com/rime/librime.git --depth=1 mkdir -p ~/librime/xbuild/lib/Release/ cp /Library/Input\\ Methods/Squirrel.app/Contents/Frameworks/librime.1.dylib ~/librime/xbuild/lib/Release/librime.dylib sudo cp /Library/Input\\ Methods/Squirrel.app/Contents/Frameworks/librime.1.dylib /usr/local/lib  然后下载并编译 liberime，需要提前安装 cmake 库来进行编译：\ngit clone https://gitlab.com/liberime/liberime.git --depth=1 cd ~/liberime export RIME_PATH=~/librime make liberime  然后需要在 emacs 中安装 pyim，此一节详见 Emacs 中文环境配置 ，当然不看也行，毕竟具体设置在本篇中需要推倒重来； M-x package-install RET pyim RET\n 将 liberime.so 动态库存至 pyim 文件夹中：\ncp ~/liberime/buid/liberime.so ~/.emacs.d/pyim/   初试啼声 接下来就是添加 emacs 对于 liberime 的配置，我先想当然地试了这个配置：\n(liberime-start (expand-file-name \u0026quot;~/Library/Rime\u0026quot;) (expand-file-name \u0026quot;~/.emacs.d/pyim/rime/\u0026quot;)) (liberime-select-schema \u0026quot;terra_double_pinyin_mspy\u0026quot;) (setq pyim-default-scheme 'rime)  这个方法有几个问题，一是哪怕我在设置中采用了简体，输出依然为繁体字；二是不支持分号与声调，所以在微软双拼中不能输入元音为 ing 的字，也不能通过声调来选词；三则是由于引入了诸多词库，打字特别卡顿。\n再接再厉 然后我可以通过添加新的 schema 来提供对分号的支持，但是声调比较麻烦。\n(add-to-list 'pyim-schemes '(rime-mspy :document \u0026quot;support ;\u0026quot; :class rime :first-chars \u0026quot;abcdefghijklmnopqrstuvwxyz\u0026quot; :rest-chars \u0026quot;abcdefghijklmnopqrstuvwxyz;\u0026quot; :prefer-trigger-chars nil )) (liberime-start (expand-file-name \u0026quot;/Library/Input Methods/Squirrel.app/Contents/SharedSupport\u0026quot;) (expand-file-name \u0026quot;~/.emacs.d/pyim/rime/\u0026quot;)) (liberime-select-schema \u0026quot;double_pinyin_mspy\u0026quot;) (setq pyim-default-scheme 'rime-mspy)  但是我发现只要改回共享库，打出来的就是简体，但是我不明白为什么只能使用共享库，却不能使用个人库，毕竟我还魔改了我的鼠须管呀，万一我想打 emoji 呢，万一我想引用个古诗词呢？\n最终解决方案 一番折腾之后，终于找出了合适的方案：\n 个人库无法显示繁体的原因其实很简单，由于鼠须管默认将 opencc 开放中文转换库 放在共享库中，所以个人库中并不包含 opencc，这样 build 的时候就不能调用这些转换文件。所以，一行代码搞定。\nln -s /Library/Input\\ Methods/Squirrel.app/Contents/SharedSupport/opencc/* ~/Library/Rime/opencc/  输入分号的问题前面通过调用新写的 schema 解决，但是声调问题比较麻烦。由于 pyim 作者给减号键（我用作平声调的）赋予了太多用途，我这半调子 lisp 水平一时半会儿也写不了一个新的函数使此键在非后翻页状态作为简单的 pyim-self-insert-command ，而且还得把后面那个函数改了，事情实在太多，所以我将方括号改作翻页，并将长得差不多的等号键用作平声。以后有时间，可能还是会把它改回减号键，毕竟长得更像一点。\n 其次则是卡顿的问题。我发现当 liberime build 时，由于在个人库中已经有过 build 好的文件，所以不会在 liberime 的库中重新 build 一份，这样非常影响速度。所以我复制了一份我写的地球双拼给 liberime 专用（yaml 文件见这儿），效果拔群。\n  具体配置如下：\n(require 'use-package) (use-package pyim :ensure nil :demand t :config (setq default-input-method \u0026quot;pyim\u0026quot;) (setq pyim-page-length 9) :bind (:map pyim-mode-map (\u0026quot;]\u0026quot; . pyim-page-next-page) (\u0026quot;[\u0026quot; . pyim-page-previous-page) (\u0026quot;-\u0026quot; . pyim-self-insert-command) (\u0026quot;=\u0026quot; . pyim-self-insert-command)) ) (use-package liberime :load-path \u0026quot;~/.emacs.d/pyim/\u0026quot; :config (liberime-start (expand-file-name \u0026quot;~/Library/Rime/\u0026quot;) (expand-file-name \u0026quot;~/.emacs.d/pyim/rime\u0026quot;)) (liberime-select-schema \u0026quot;terra_double_pinyin_pyim\u0026quot;) (add-to-list 'pyim-schemes '(rime-mspy :document \u0026quot;support ;\u0026quot; :class rime :first-chars \u0026quot;abcdefghijklmnopqrstuvwxyz/\u0026quot; :rest-chars \u0026quot;abcdefghijklmnopqrstuvwxyz;=/,\\\\\u0026quot; :prefer-trigger-chars nil )) (setq pyim-default-scheme 'rime-mspy) )  另外，我在 ~/.emacs.d/pyim/rime/ 文件夹中添加了 pyim 作者推荐的优化配置文件 default.custom.yaml ，详见其 github：\npatch: schema_list: - schema: terra_double_pinyin_pyim \u0026quot;menu/page_size\u0026quot;: 50 \u0026quot;speller/auto_select\u0026quot;: false \u0026quot;speller/auto_select_unique_candidate\u0026quot;: false ","date":1567298400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1568915303,"objectID":"0ebb2332020189328e49c8142c6b9baf","permalink":"/post/449.html/","publishdate":"2019-08-31T20:40:00-04:00","relpermalink":"/post/449.html/","section":"post","summary":"由于我习惯写中文博客，所以将写博客这件事也转移到 Emacs 后，我渐渐感觉到 pyim 的不足。所以今天研究一下如何让 pyim 调用 Rime 的词库。\n","tags":["Emacs","pyim","liberime","Rime","鼠须管"],"title":"Integrate Mac version Emacs with Rime input engine","type":"post"},{"authors":null,"categories":null,"content":"I am currently (still) seeking a job in data/software engineering area, and I am preparing for all kinds of technical interviews, ranging from coding, algorithm, system design, SQL to computer science fundamental quiz. Data engineer is a role with vague definition, and people with this title functions as an ETL (extract, transformation, load) engineer in some companies. Thus, topics on data transformation could be covered during the interview. In this blog, I am trying to hack interview focusing on data tranformation.\nPrerequisites: boto3 Boto is the AWS SDK for python, which provides easy-to-use, object-oriented API and low-level access to AWS services. We could find the documentation here.\nWe could easily install the latest Boto 3 release via pip:\n$ pip install boto3  Then configure the credential file at ~/.aws/credentials:\n[default] aws_access_key_id = YOUR_ACCESS_KEY aws_secret_access_key = YOUR_SECRET_KEY  And set the default region at ~/.aws/config:\n[default] region=us-east-1  To use boto3, we could import it and pass the service-to-use to it. For example, to use Amazon S3, we could choose a resource by:\nimport boto3 s3 = boto3.resource('s3')  Create a s3 bucket over client level:\ns3_client = boto3.client('s3') s3_client.create_bucket(Bucket='BUCKET_NAME')  List existing buckets for the AWS account:\nresponse = s3_client.list_buckets() for bucket in response['Buckets']: print(f' {bucket[\u0026quot;Name\u0026quot;]}')  Upload file into a s3 bucket:\nresponse = s3_client.upload_file(file_name, bucket, object_name)  Or upload object in binary mode into a s3 bucket:\nwith open('test.jpg', 'rb') as f: s3.upload_fileobj(f, \u0026quot;BUCKET_NAME\u0026quot;, \u0026quot;OBJECT_NAME\u0026quot;)  Or directly put object into a s3 bucket over the bucket level:\ndata = open('test.jpg', 'rb') bucket = s3.Bucket('my-bucket') bucket.put_object(Key=object_name, Body=data)  To download file from a S3 bucket, we could:\ns3.download_file('BUCKET_NAME', 'OBJECT_NAME', 'FILE_NAME')  Or:\nwith open('FILE_NAME', 'wb') as f: s3.download_fileobj('BUCKET_NAME', 'OBJECT_NAME', f)  We could also set configuration when uploading, downloading, or copying a file or S3 object by:\nfrom boto3.s3.transfer import TransferConfig GB = 1024 ** 3 config = TransferConfig(multipart_threshold=5*GB) config = TransferConfig(max_concurrency=5) config = TransferConfig(use_threads=False) s3.upload_file('FILE_NAME', 'BUCKET_NAME', 'OBJECT_NAME', Config=config)  Prerequisites: psycopg2 Psycopg2 is a popular PostgreSQL database adapter for python. We could find documentation here.\nWe could easily install psycopg2 via pip:\n$ pip install psycopg2-binary  To use psycopg2, we could import it, connect to an existing database and open a cursor to perform database operations:\nimport psycopg2 conn = psycopg2.connect(dbname=\u0026quot;DATABASE_NAME\u0026quot;, user=\u0026quot;USER\u0026quot;, host=\u0026quot;HOST\u0026quot;, port=\u0026quot;PORT\u0026quot;, password=\u0026quot;PASSWORD\u0026quot;) cur = conn.cursor()  Query the database and fetch data in an iteration-like way:\ncur.execute(sql_query) cur.fetchone() cur.fetchmany(2) cur.fetchall()  Pass parameters to SQL queries:\ncur.execute(\u0026quot;\u0026quot;\u0026quot; INSERT INTO some_table (an_int, a_date, another_date, a_string) VALUES (%(int)s, %(date)s, %(date)s, %(str)s); \u0026quot;\u0026quot;\u0026quot;, {'int': 10, 'str': \u0026quot;O'Reilly\u0026quot;, 'date': datetime.date(2005, 11, 18)})  Make the changes to the database persistent:\nconn.commit()  Close communication with the database\ncur.close() conn.close()  Upload data from S3 into Redshift def main(): connection_parameters = { 'dbname': dbname, 'user': user, 'host': host, 'port': port, 'password': password } try: conn = psycopg2.connect(**connection_parameters) print(\u0026quot;Connected to Redshift.\u0026quot;) except: print(\u0026quot;Unable to connect to Redshift.\u0026quot;) cur = conn.cursor() upload_statement = \u0026quot; COPY {}.{} FROM {} IAM_ROLE {} CSV; COMMIT; \u0026quot;.format(table_name, schema, file_name, iam_role) try: cur.execute(upload_statement) print(\u0026quot;Upload successfully\u0026quot;) except psycopg2.Error: raise ExecuteFailure(\u0026quot;Failed to upload the file.\u0026quot;) cur.close() conn.close() if __name__ == \u0026quot;__main__\u0026quot;: main()  Load data from Redshift to pandas import sqlalchemy as sa import pandas as pd surl = 'redshift+psycopg2://' engine = sa.create_engine(surl+user+':'+password+'@'+host+':'+port+'/'+dbname,echo=False) df = pd.read_sql_query('SELECT * FROM table ;', engine) ","date":1567178040,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1568868845,"objectID":"e18e99343337d25736bfac76ef0e8601","permalink":"/post/448.html/","publishdate":"2019-08-30T11:14:00-04:00","relpermalink":"/post/448.html/","section":"post","summary":"I am currently (still) seeking a job in data/software engineering area, and I am preparing for all kinds of technical interviews, ranging from coding, algorithm, system design, SQL to computer science fundamental quiz. Data engineer is a role with vague definition, and people with this title functions as an ETL (extract, transformation, load) engineer in some companies. Thus, topics on data transformation could be covered during the interview. In this blog, I am trying to hack interview focusing on data tranformation.\n","tags":["Data-Engineering","Interview","Python"],"title":"Hacking the Data Transformation Interview","type":"post"},{"authors":null,"categories":null,"content":" This post is prepared completely in org-mode. YEAH!\n 从 2016 将博客迁移至 Hexo+Github 的方案后，我便一直采用此方案写博客。大体来说感受挺不错的，然而由于我有数百篇博客，build 速度永远很让我头大。尤其是有时 markdown 显示出问题了，我又得等上数分钟才能看到结果，体验很不好。所以一听说 Hugo 能一秒生成博客，哪怕要舍弃我花大功夫美化的 NeXT 主题，我依然心生向往，今天便将 Hexo 迁移至 Hugo，顺便达成了 Emacs 写博客的小目标。\n安装 Hugo 并初始化  首先使用 Homebrew 安装 Hugo:   $ brew install hugo   然后建立站点   $ hugo new site blog   安装主题，我采用比较简单的 even 主题   $ git clone https://github.com/olOwOlo/hugo-theme-even themes/even  从 Hexo 迁移 好消息是，此迁移过程相当无痛。由于我之前将博客内容存在 Dropbox 上，所以只需要将相关文件 link 至 Hugo 的相关文件夹内。结构大致如下：\n. ├── content │ ├── about │ │ └── index.md │ └── post │ ├── post1.md │ └── ... ├── static │ ├── images │ │ ├── image1.png │ │ └── ... │ └── CNAME ...  有一个需要注意的地方是 Hexo 与 Hugo 对于 markdown 头文件中的 url 定义不同，我采用 grep 将其批量改成 slug ，并在配置文件中添加了 permalinks 的生成方式，以保证超链接的稳定：\n[permalinks] post = \u0026quot;/:year/:month/:slug\u0026quot;  生成预览 输入 hugo server ，几乎是眨眼工夫，便已在内存中生成预览，而且对于博文可即时显示改动，非常方便。确实比 Hexo 快上百倍。\n| ZH-CN +------------------+-------+ Pages | 956 Paginator pages | 139 Non-page files | 0 Static files | 85 Processed images | 0 Aliases | 254 Sitemaps | 1 Cleaned | 0 Total in 820 ms  配合 org-mode 使用更佳 以前使用 Hexo 写博客时，博文都分散于各种 .md 文件中，管理起来很不方便。另一方面，由于我平时习惯用 org-mode 记记笔记，管理生活。有了好轮子，我干脆想着一鼓作气把车换了。在此我使用的是 ox-hugo 的 One post per Org subtree 方案，配置如下：\n#+HUGO_BASE_DIR: ~/Dropbox/Blog/ #+HUGO_SECTION: post #+HUGO_WEIGHT: auto #+HUGO_AUTO_SET_LASTMOD: t #+author: #+hugo_custom_front_matter: :author \u0026quot;ziyunch\u0026quot; * Technical :@技术宅: ** TODO 博客由 Hexo 迁移至 Hugo :Emacs:Hexo:Hugo: :PROPERTIES: :EXPORT_FILE_NAME: 20190826-hexo-2-hugo :END:  也就是说采用标签继承的方式，将博文分类。写完当篇博文，将 TODO 状态变更为 DONE 时， ox-hugo 会自动为文档生成时间戳。然后在 subtree 上 C-c C-e H H 即可在相应目录生成 .md 文档。此时如果后台正在运行着 hugo server ，即可在 http://localhost:1313/ 看到即时更新。\n在 Github 上发布 第一次部署，需要新建一个 public 文件夹，并将原来部署了 Hexo 博客的 repo 关联上，步骤如下：\n$ mkdir public $ hugo -t even $ cd public $ git init $ git remote add upstream https://github.com/ziyunch/ziyunch.github.io.git $ git add . $ git commit -m \u0026quot;switch to hugo\u0026quot; $ git push -f upstream master  之后则可如官网发布指南所示编写一个可执行的 .sh 文件来自动化部署发布：\n#!/bin/sh # If a command fails then the deploy stops set -e printf \u0026quot;\\033[0;32mDeploying updates to GitHub...\\033[0m\\n\u0026quot; # Build the project. hugo -t even # Go To Public folder cd public # Add changes to git. git add . # Commit changes. msg=\u0026quot;rebuilding site $(date)\u0026quot; if [ -n \u0026quot;$*\u0026quot; ]; then msg=\u0026quot;$*\u0026quot; fi git commit -m \u0026quot;$msg\u0026quot; # Push source and build repos. git push upstream master  自此大功告成\n","date":1566877740,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1568915102,"objectID":"bbd989f983fabb698100756892b87217","permalink":"/post/447.html/","publishdate":"2019-08-26T23:49:00-04:00","relpermalink":"/post/447.html/","section":"post","summary":" This post is prepared completely in org-mode. YEAH!\n 从 2016 将博客迁移至 Hexo+Github 的方案后，我便一直采用此方案写博客。大体来说感受挺不错的，然而由于我有数百篇博客，build 速度永远很让我头大。尤其是有时 markdown 显示出问题了，我又得等上数分钟才能看到结果，体验很不好。所以一听说 Hugo 能一秒生成博客，哪怕要舍弃我花大功夫美化的 NeXT 主题，我依然心生向往，今天便将 Hexo 迁移至 Hugo，顺便达成了 Emacs 写博客的小目标。\n","tags":["Emacs","Hexo","Hugo"],"title":"Manage personal blog in org-mode and host on Github using Hugo","type":"post"},{"authors":null,"categories":null,"content":"This configuration:\n Optimized for simplified Chinese; Implement 朙月拼音 luna-pinyin, 微软双拼 double-pinyin-mspy and 地球拼音 terra-pinyin with 20+ dictionaries including symbols and emoji; Feature 地球双拼 terra-double-pinyin-mspy, a double pinyin input method supporting tone marks; Use 地球双拼 terra-double-pinyin-mspy to reverse lookup 吴语（苏州话） wugniu_soutseu with tone marks, toggled by `; Use ASCII mode for several applications.  Supported Rime Version MacOS The config should run on Squarrel 0.14.0 or greater.\nInstallation 鼠鬚管 Squirrel (MacOS)  via Latest release via source code: Build instruction via Homebrew: brew cask install squirrel  東風破 plum Install plum, the configuration manager for Rime input method engine:\ncd ~/Library/Rime curl -fsSL https://git.io/rime-install | bash  Then install packages:\ncd plum bash rime-install :preset double-pinyin emoji NGLI/rime-wugniu_soutseu  Supported input methods ℞\n Essentials: prelude 基础配置 / essay 八股文 Phonetic-based: luna-pinyin 朙月拼音 / terra-pinyin 地球拼音 / bopomofo 注音 / pinyin-simp 袖珍简化字拼音 Derivatives of Pinyin: double-pinyin 双拼 / combo-pinyin 宫保拼音 / stenotype 打字速记法 Varieties of Chinese: jyutping 粤拼 / wugniu 上海吴语 / soutzoe 苏州吴语 / middle-chinese 中古汉语拼音 Shape-based: stroke 笔画 / cangjie 仓颉输入法 / quick 速成 / wubi 五笔字型 / array 行列输入法 / scj 快速仓颉 Miscellaneous: emoji 颜文字 / ipa: 国际音标  Personalized configuration and dictionaries To install, clone this repo to ~/Library/Rime:\ncd ~/Library/Rime git init echo -e \u0026quot;/*\\n\\!/README.org\\n\\!/dict\\n\\!/*.custom.yaml\\n\\!/*.extended.dict.yaml\\n\\!/terra_double_pinyin_mspy.*\\n!/*pyim*\u0026quot; \u0026gt;\u0026gt; .gitignore git remote add origin https://github.com/ziyunch/Rime.git git pull origin master  Update: 2019-08-31\nln -s /Library/Input\\ Methods/Squirrel.app/Contents/SharedSupport/opencc/* ./opencc/  Deploy Press Control + Option + ` to deploy current configuration.\nPress Control + ` to select input method.\nUpdates To update plum itself, run:\ncd ~/Library/Rime/plum bash rime-install plum  To update the plum packages, run:\ncd ~/Library/Rime/plum bash rime-install :preset double-pinyin emoji NGLI/rime-wugniu_soutseu  To update the config, run:\ncd ~/Library/Rime git pull origin master  Customerization  Modify default.custom.yaml to select more input methods or comment out input methods no longer needed:   schema_list: - schema: luna_pinyin # 朙月拼音 - schema: terra_pinyin # 地球拼音 dì qiú pīn yīn - schema: terra_double_pinyin_mspy # 地球双拼 - schema: double_pinyin_mspy # 微软双拼 - schema: double_pinyin # 自然码双拼 - schema: double_pinyin_abc # 智能ABC双拼 - schema: double_pinyin_flypy # 小鹤双拼 - schema: wugniu_soutseu # 吴语（苏州话） - schema: stroke # 笔画 - schema: cangjie # 仓颉输入法 - schema: bopomofo # 注音 - schema: emoji # 颜文字   Delete wugniu_soutseu.custom.yaml to use the default 朙月拼音 luna_pinyin reverse lookup 吴语（苏州话） wugniu_soutseu. ","date":1563670680,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1568914942,"objectID":"a4a2b430d0af13ed29647d149efd521d","permalink":"/post/445.html/","publishdate":"2019-07-20T20:58:00-04:00","relpermalink":"/post/445.html/","section":"post","summary":"This configuration:\n Optimized for simplified Chinese; Implement 朙月拼音 luna-pinyin, 微软双拼 double-pinyin-mspy and 地球拼音 terra-pinyin with 20+ dictionaries including symbols and emoji; Feature 地球双拼 terra-double-pinyin-mspy, a double pinyin input method supporting tone marks; Use 地球双拼 terra-double-pinyin-mspy to reverse lookup 吴语（苏州话） wugniu_soutseu with tone marks, toggled by `; Use ASCII mode for several applications. ","tags":["Rime","鼠须管"],"title":"An optimized Rime configuration","type":"post"},{"authors":null,"categories":null,"content":"昨天搞定 Emacs 的中文环境，今天想着好久没记帐了，随手记总是很花时间，干脆一鼓作气，将记帐一起搬过来。\n复式记帐 我本科时双修了一门金融，其中最为繁琐，也是最令人头疼的一门课便是会计学。我不爱听讲，毕业之后也将会计的知识点忘得查差不多了，然而其\u0026rdquo;有借必有贷，借贷必相等\u0026rdquo;的复式记帐法，反而是我生活中运用最多的。\n复式记帐法说起来复杂，对个人来说，就是将每笔交易分门别类，填入下面这条等式中：\n.org-center { margin-left: auto; margin-right: auto; text-align: center; }  资产 + 费用 = 负债 + 所有者权益 + 收入\n\n在个人记帐中，这条等式辅以借贷概念会令人望而生畏，所以我将其略一变形：\n.org-center { margin-left: auto; margin-right: auto; text-align: center; }  （+资产）+（-负债）+（+费用）+（-收入）+（-所有者权益）= 0\n\n 资产与负债都是与金钱直接挂钩的，比如银行户头，比如人民币美钞，比如信用卡帐户，再比如借条，这些都可以算是货币的不同表示形式。 费用与收入则是与金钱间接挂钩的，比如工资，比如商品，比如服务，这些都可以算是生产资本与商品资本的不同表现形式。其中收入与字面意思不同，可以理解为生产资本（劳动力等）。 所有者权益对个人意义不大，一般用来记录历史盈余与糊涂帐。  而这个变形公式中的正负号，则可以将各项目的符号关系，用作资金流向的参照。这么说有点玄乎，换个茨威格式的说法就是：\u0026rdquo;人们从命运得到的一切，冥冥之中都记下了它的价钱。\u0026rdquo;花钱买了服务，则是减少资产（花了钱），增加费用（得到服务）；工资到帐，则是增加资产（到帐），减少收入（既有劳动时间的减少）；别人跟你借了钱，则是资产减少（银行帐户或现金余额减少），负债增加（别人在你这儿的负债）。\n总结一下，由于人类暂时无法操控时间，所以费用一般为正，收入一般为负。而没有破产的情况下资产一般为正，别人欠你的钱为正，信用卡债（你欠别人的钱）为负。\n随手记帐本导出 刚来美帝我就开始用随手记，一晃也七年过去了（随手记提醒：今天是您记帐的2524天）。虽然作为强迫症的我有着非常完整的消费记录，但是这也带来了非常大的迁移成本。随手记的问题在于想要使用复式记帐时，需要通过结算中转来完成一对多的转帐操作，在聚餐或者帮别人付钱的时候比较麻烦。所以每周都需要花费大量时间来输入帐单，费时费力。\n首先尝试从随手记 app 导出，设置－高级功能－备份与同步－备份与恢复－本地备份与恢复－WIFI备份，得到一个 .kbf 文件，将其后缀改为 .zip ，解压得到一个 .sqlite 文件。然而此文件经过加密，打开并不容易。\n不过在那个入口还看到导出 EXCEL 文件的选项，乃会员专享，恰好首月免费，我又去意已决，遂开通并获取文件。\n记帐方式选择 有了之前的记录，就可以着手选择一款好用的记帐软件了。虽然有可以连接 postgresql 的记帐软件 gnucash，但我还是想用 Emacs 来进行记录操作。网上一搜，有一个 Plain Text Accounting 网站做了详尽的整合。一路看下来，虽然 Ledger 是老前辈，可是 Beancount 的前端 Fava 效果实在好看，有这么一个轮子，为何不用呢？同时还搜到了一位中文博主 wzyboy 的三年的使用经验（Beancount \u0026mdash;\u0026mdash; 命令行复式簿记，使用 Beancount 记录证券投资），感觉非常不错，遂选定 Beancount。\n$ pip install beancount $ pip install fava  然而 pip 安装方式有两个问题，一是更新不如 source code 频繁，而是不带有 elisp code。若是自己 makefile，由于作者使用仅支持 Python 2.7 的 Mercurial 进行分布式文件管理，如何将 bitbucket 上得到的 sourse code 保持更新也是比较让人头疼的事。我只能暂时将 .el 文件下载下来，以后手动进行更新，较为折腾。\n(add-to-list 'load-path \u0026quot;/path/to/elisp/file/\u0026quot;) (require 'beancount) (add-to-list 'auto-mode-alist '(\u0026quot;\\\\.bean\\\\'\u0026quot; . beancount-mode))  帐本结构 由于我已经通过随手记记了七年的帐，所以如果采用单一帐本的话，一方面会导致主帐本过于臃肿，另一方面也会给帐本导入增加障碍。经过考量，我的帐本结构如主帐本文件所示是这样的：\noption \u0026quot;title\u0026quot; \u0026quot;我的帐本\u0026quot; option \u0026quot;operating_currency\u0026quot; \u0026quot;USD\u0026quot; ; 这样在前端USD外的货币会共享一栏 include \u0026quot;accounts.bean\u0026quot; ; 货币相关的资产（Assets）负债（Liabilities） include \u0026quot;items.bean\u0026quot; ; 资本相关的收入（Income）费用（Expenses） include \u0026quot;commodities.bean\u0026quot; ; 货币 include \u0026quot;balances.bean\u0026quot; ; 对帐记录 include \u0026quot;2019.bean\u0026quot; ; 记录每年普通帐目 include \u0026quot;event/event-a.bean\u0026quot; ; 记录事件帐目（旅游为主） include \u0026quot;points/bank-a.bean\u0026quot; ; 记录里程、积分、礼品卡、预扣款等  随手记帐本导入 随手记帐本导出后是一个 EXCEL 文件，含有交易种类、类别、子类、帐户 1、帐户 2、花费、人员、商家、事件、日期、详细这些列，所以我的导入思路是：\n 建立两个字典 account_dict 与 item_dict ，分别用于转换帐户1/2与子类；\n 通过不同交易种类判断交易条目的正负号：\n   交易种类 子类 帐户1 帐户2     支出 + -    收入 - +    转帐  - +    逐行读取 CSV 文档并转换为 beancount 记帐格式并存储于每年的文件或事件文件中，同时记录四大项目的开始时间与事件标签；\n如:\n支出,日常,Hannaford,Chase Freedom,,12.34,,Hannaford,,1/1/19,  则转换为:\n2019-01-01 * \u0026quot;Hannaford\u0026quot; \u0026quot;支出\u0026quot; Expenses:Grocery:Hannaford +12.34 USD Liabilities:US:Chase:Freedom -12.34 USD  之前使用随手记的时候，我使用\u0026rdquo;结算中转\u0026rdquo;条目来记录复杂交易。而在 beancount 中，由于复杂交易可以直接记录在一个交易事件中，这个\u0026rdquo;结算中转\u0026rdquo;其实没什么用处了。所以在导入帐本时，我将当日产生的结算事件都暂存在一个列表中，如果总额为 0，则仅记录其他类别/帐目的行为，添加 flag 并将\u0026rdquo;详细\u0026rdquo;做为注释记录在行为右边，如果不为 0,则添加 flag 并原样输出，后期再做修改。如:\n转账,,,Chase Freedom,结算中转,12.34,,Hannaford,,1/1/19,买菜 转账,,,结算中转,朋友A,2.34,,Hannaford,,1/1/19,水果 转账,,,结算中转,朋友B,5.55,,Hannaford,,1/1/19,蔬菜 支出,日常,Hannaford,结算中转,,6.45,,Hannaford,,1/1/19,鸡蛋  则转换为:\n2019-01-01 ! \u0026quot;Hannaford\u0026quot; \u0026quot;买菜 水果 蔬菜 鸡蛋\u0026quot; Liabilities:US:Chase:Freedom -12.34 USD ; 买菜 Liabilities:Payables:A +2.34 USD ; 水果 Liabilities:Payables:B +5.55 USD ; 蔬菜 Expenses:Grocery:Hannaford +6.45 USD ; 鸡蛋  生成 accounts.bean 、 items.bean 、 balances.bean 与主帐本 main.bean ；\nbalances.bean 比较特殊，用于核对帐目。可以通过银行对帐单自动生成，但是由于我 17 年后的对帐单都没下载到本地来，所以直接在下载的同时手动输入数额了。由于 balance 仅核算当日以前的交易，所以有时需要修改 balance 日期来避免错误提示。\n2019-01-11 balance Liabilities:US:Chase:Freedom -123.45 USD  对于现金来说由于比较零散，也不一定留有小票，所以我会用 pad 补齐：\n2019-01-31 pad Assets:US:Cash Expenses:Grocery:Other 2019-02-01 balance Assets:US:Cash +50 USD  对于货币种类进行核算。\n随手记导出的文件有个问题是不会记录货币种类，所以需要后期对涉及多货币的交易进行核对与修改，比如我帮国内的朋友 c 买了东西，对方还我人民币的话，可以记成：\n2019-01-01 * \u0026quot;\u0026quot; \u0026quot;C还钱\u0026quot; Assets:CN:Cash +68 CNY Liabilities:Payables:C -10 USD @@ 68 CNY   查看报表 Beancount 自带 bean-web main.bean 语句，可以在 http://localhost:8080/ 查看简单报表。 不过装了 fava 的我，便可以欢乐地使用 fava main.bean 语句，在 http://localhost:5000/ 查看比较华丽的报表。这里 有官方演示，效果拔群。\n快捷记账 我写了一个简单的 org-capture-templates ，这样就可以通过 C-c c-b 来进行快捷记账。\n(setq org-capture-templates ' ((\u0026quot;b\u0026quot; \u0026quot;Beancount\u0026quot; plain (file \u0026quot;~/Dropbox/Beancount/2019.bean\u0026quot;) \u0026quot; %(org-read-date) %^{标识|*|!} \\\u0026quot;%^{商户}\\\u0026quot; \\\u0026quot;%^{描述}\\\u0026quot; %^{借记||Expenses:Grocery:Hannaford|Expenses:Grocery:Other|Expenses:Restaurant|Income:Paycheck|Assets:US:Cash|Assets:CN:Cash|Liabilities:Payables:A|Liabilities:Payables:B|Liabilities:Payables:C|Liabilities:US:Chase:Freedom} +%^{金额} USD %^{贷记||Expenses:Grocery:Hannaford|Expenses:Grocery:Other|Expenses:Restaurant|Income:Paycheck|Assets:US:Cash|Assets:CN:Cash|Liabilities:Payables:A|Liabilities:Payables:B|Liabilities:Payables:C|Liabilities:US:Chase:Freedom} -%^{金额} USD\u0026quot;)))  不过在这个模板中，帐户名称需要自定义，比较麻烦，不能通用。未来我会尝试写一个 lisp function 来优化，希望能够实现：\n 记帐不限条目，可记录多项事件于同一笔交易中； 自动读取 accounts.bean 与 items.bean 文件中的项目并作为备选； 自动对齐金额。 ","date":1562259480,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1568915457,"objectID":"052d3c82542247d74b3c6df2228fa9c9","permalink":"/post/444.html/","publishdate":"2019-07-04T12:58:00-04:00","relpermalink":"/post/444.html/","section":"post","summary":"昨天搞定 Emacs 的中文环境，今天想着好久没记帐了，随手记总是很花时间，干脆一鼓作气，将记帐一起搬过来。\n复式记帐 我本科时双修了一门金融，其中最为繁琐，也是最令人头疼的一门课便是会计学。我不爱听讲，毕业之后也将会计的知识点忘得查差不多了，然而其\u0026rdquo;有借必有贷，借贷必相等\u0026rdquo;的复式记帐法，反而是我生活中运用最多的。\n复式记帐法说起来复杂，对个人来说，就是将每笔交易分门别类，填入下面这条等式中：\n.org-center { margin-left: auto; margin-right: auto; text-align: center; }  资产 + 费用 = 负债 + 所有者权益 + 收入\n\n在个人记帐中，这条等式辅以借贷概念会令人望而生畏，所以我将其略一变形：\n.org-center { margin-left: auto; margin-right: auto; text-align: center; }  （+资产）+（-负债）+（+费用）+（-收入）+（-所有者权益）= 0\n\n 资产与负债都是与金钱直接挂钩的，比如银行户头，比如人民币美钞，比如信用卡帐户，再比如借条，这些都可以算是货币的不同表示形式。 费用与收入则是与金钱间接挂钩的，比如工资，比如商品，比如服务，这些都可以算是生产资本与商品资本的不同表现形式。其中收入与字面意思不同，可以理解为生产资本（劳动力等）。 所有者权益对个人意义不大，一般用来记录历史盈余与糊涂帐。  而这个变形公式中的正负号，则可以将各项目的符号关系，用作资金流向的参照。这么说有点玄乎，换个茨威格式的说法就是：\u0026rdquo;人们从命运得到的一切，冥冥之中都记下了它的价钱。\u0026rdquo;花钱买了服务，则是减少资产（花了钱），增加费用（得到服务）；工资到帐，则是增加资产（到帐），减少收入（既有劳动时间的减少）；别人跟你借了钱，则是资产减少（银行帐户或现金余额减少），负债增加（别人在你这儿的负债）。\n总结一下，由于人类暂时无法操控时间，所以费用一般为正，收入一般为负。而没有破产的情况下资产一般为正，别人欠你的钱为正，信用卡债（你欠别人的钱）为负。\n","tags":["Emacs","Python","Beancount"],"title":"Plain text accounting tool Beancount in Emacs","type":"post"},{"authors":null,"categories":null,"content":"使用 Emacs 三年多了，当时受了 一年成为 Emacs 高手 的蛊惑，且贪图便利，使用了 Purcell 的配置。正如 Purcell 所说，此配置相当 reasonable，用来入门确实让我受益匪浅，少走了很多弯路。三年使用下来，我需要添加的插件只有 org-ref 和 ob-smiles ，配置更新也仅须 git pull 外加 M-x package-list-packages U x 即可，非常方便。\n然而过去三年来，我主要是使用 Emacs 中的 org-mode 来记 Science 与 Tech 方面笔记，基于 Latex 的长文章 / 代码我更喜欢用 Atoms + Vim-mode 来写，基于 Markdown 的博客则用 MWeb 来写，中文笔记喜欢使用 Bears，最后却还是回到了苹果自带的免费 Notes。其他零零碎碎的场景则使用更为零碎的 app，餐馆用 DayGram + Workflowy，记账用随手记。非常不统一。\n也就是说，我并不是一个“running my life with Emacs”的重症者，Purcell 配置的 Emacs 中也有大量我用不到，或者需要使用却不甚了解的插件。所以失业在家这个契机恰好也是让我重新审视 Emacs，看看我能否最大化地使用 Emacs。\n对我而言，使用 Atoms 来写代码与 Latex，是由于我对使用 Emacs 调试还不甚熟练。所以这几天我花了一点时间重新阅读了 Emacs 手册。\n使用 MWeb 来写博客与使用 Notes 来记笔记的原因则比较可笑，因为我基本上都是使用英文记录 Science \u0026amp; Tech 方面的笔记，我并没有配置 Emacs 的中文环境。所以需要使用中文来写东西时，我自然就得换用其他工具。这段时间准备面试，将 org-mode 的使用范围扩大到记录面试适宜，由于一亩三分地是一个主要资料来源，不免需要粘贴许多中文帖子进来。这时再将 Emacs 视为一个纯英文环境未免有些麻烦。而将 Emacs 中文化了，自然也不需要 MWeb 和 Notes 或者 Bear 什么事了。\n而记录餐馆和消费的需求比较麻烦，本文暂且搁置，今后有空再来研究。\nEmacs 中文输入法 Emacs 窗口左下角显示的是 character set 与 editing state，其中 character set 默认值为 U，即没有 input-mode 且使用 unicode 的 coding system，通过 C-\\ ，可以非常方便地设置输入法并进行切换。\nEmacs 有一些自带的中文输入法，比如拼音（chinese-py）、自然码（chinese-ziranma），还有一些四声（chinese-sisheng）、英汉（chinese-ecdict）等输入法。我将简体编码的一些输入法列于下表，详见 leim-lisp.el （可通过 M-x find-library 迅速查看）。\n   input mode 输入法     chinese-ccdospy 缩写拼音   chinese-ctlau 刘锡祥式粤音   chinese-punct 标点符号   chinese-py 拼音   chinese-qj 全角   chinese-sw 首尾   chinese-tonepy 带调拼音   chinese-ziranma 自然码    由于我习惯用微软双拼，故另外安装 pyim，配置如下：\n(require 'pyim) (require 'pyim-basedict) (pyim-basedict-enable) (setq default-input-method \u0026quot;pyim\u0026quot;) (setq pyim-default-scheme 'microsoft-shuangpin) (setq pyim-page-tooltip 'popup) (setq pyim-page-length 5)  Emacs 中文字体 Emacs 中默认的中文字体是 Arial Unicode MS，看着总觉得哪哪不顺眼，所以下一步就是更换个顺眼的中文字体。\n此处我先参考了 zhuoqiang 的做法，将中英文字体设为等宽的：\n;; Setting English Font (set-face-attribute 'default nil :font \u0026quot;DejaVu Sans Mono 14\u0026quot;) ;; Chinese Font (dolist (charset '(kana han symbol cjk-misc bopomofo)) (set-fontset-font (frame-parameter nil 'font) charset (font-spec :family \u0026quot;PingFang SC\u0026quot; :size 16)))  并将他写的更为通用的设置字体的函数：\n(defun qiang-set-font (english-fonts english-font-size chinese-fonts \u0026amp;optional chinese-font-size))  略加修改为：\n(defun qiang-set-font (english-fonts english-font-size chinese-fonts \u0026amp;optional chinese-font-scale) ... :size (* chinese-font-scale english-font-size))  然而当我用 C-x C-+ 动态调整字体大小时，发现只有英文字体会缩放，中文则仍然蠢蠢地处于初始大小。查手册得可通过 face-font-rescale-alist 来设定特定字体缩放值。简单来说就是这样：\n(setq face-font-rescale-alist '((\u0026quot;PingFang SC\u0026quot; . chinese-font-scale))  但是这样只能对苹方字体起效，如果一个一个对 font-list 中的字体修改 scale-factor 看起来又不简洁。于是我想到两种较为简便的设定方式：\n;; First method (setq face-font-rescale-alist (loop for x in zh-font-list collect (cons x chinese-font-scale))) ;; Second method (setq face-font-rescale-alist (pairlis zh-font-list (make-list (list-length zh-font-list) chinese-font-scale)))  效果拔群。\n详细配置如下：\n(defun qiang-font-existsp (font) (if (null (x-list-fonts font)) nil t)) (defvar zh-font-list '(\u0026quot;PingFang SC\u0026quot; \u0026quot;Hiragino Sans GB\u0026quot; \u0026quot;Microsoft Yahei\u0026quot; \u0026quot;Source Han Sans Normal\u0026quot; \u0026quot;STHeiti\u0026quot; \u0026quot;黑体\u0026quot; \u0026quot;新宋体\u0026quot; \u0026quot;宋体\u0026quot;)) (defvar en-font-list '(\u0026quot;DejaVu Sans Mono\u0026quot; \u0026quot;Monaco\u0026quot; \u0026quot;Consolas\u0026quot; \u0026quot;Monospace\u0026quot; \u0026quot;Courier New\u0026quot;)) (defun qiang-make-font-string (font-name font-size) (if (and (stringp font-size) (equal \u0026quot;:\u0026quot; (string (elt font-size 0)))) (format \u0026quot;%s%s\u0026quot; font-name font-size) (format \u0026quot;%s %s\u0026quot; font-name font-size))) (defun qiang-set-font (english-fonts english-font-size chinese-fonts \u0026amp;optional chinese-font-scale) (setq chinese-font-scale (or chinese-font-scale 1.2)) (setq face-font-rescale-alist (loop for x in zh-font-list collect (cons x chinese-font-scale))) \u0026quot;english-font-size could be set to \\\u0026quot;:pixelsize=18\\\u0026quot; or a integer. If set/leave chinese-font-scale to nil, it will follow english-font-size\u0026quot; (require 'cl) ; for find if (let ((en-font (qiang-make-font-string (find-if #'qiang-font-existsp english-fonts) english-font-size)) (zh-font (font-spec :family (find-if #'qiang-font-existsp chinese-fonts)))) ;; Set the default English font (message \u0026quot;Set English Font to %s\u0026quot; en-font) (set-face-attribute 'default nil :font en-font) ;; Set Chinese font ;; Do not use 'unicode charset, it will cause the English font setting invalid (message \u0026quot;Set Chinese Font to %s\u0026quot; zh-font) (dolist (charset '(kana han symbol cjk-misc bopomofo)) (set-fontset-font (frame-parameter nil 'font) charset zh-font)))) (qiang-set-font en-font-list 14 zh-font-list) ","date":1562175840,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1568915453,"objectID":"469de3c7e9bb23e42f4654005935e73b","permalink":"/post/443.html/","publishdate":"2019-07-03T13:44:00-04:00","relpermalink":"/post/443.html/","section":"post","summary":"使用 Emacs 三年多了，当时受了 一年成为 Emacs 高手 的蛊惑，且贪图便利，使用了 Purcell 的配置。正如 Purcell 所说，此配置相当 reasonable，用来入门确实让我受益匪浅，少走了很多弯路。三年使用下来，我需要添加的插件只有 org-ref 和 ob-smiles ，配置更新也仅须 git pull 外加 M-x package-list-packages U x 即可，非常方便。\n然而过去三年来，我主要是使用 Emacs 中的 org-mode 来记 Science 与 Tech 方面笔记，基于 Latex 的长文章 / 代码我更喜欢用 Atoms + Vim-mode 来写，基于 Markdown 的博客则用 MWeb 来写，中文笔记喜欢使用 Bears，最后却还是回到了苹果自带的免费 Notes。其他零零碎碎的场景则使用更为零碎的 app，餐馆用 DayGram + Workflowy，记账用随手记。非常不统一。\n也就是说，我并不是一个“running my life with Emacs”的重症者，Purcell 配置的 Emacs 中也有大量我用不到，或者需要使用却不甚了解的插件。所以失业在家这个契机恰好也是让我重新审视 Emacs，看看我能否最大化地使用 Emacs。\n对我而言，使用 Atoms 来写代码与 Latex，是由于我对使用 Emacs 调试还不甚熟练。所以这几天我花了一点时间重新阅读了 Emacs 手册。\n使用 MWeb 来写博客与使用 Notes 来记笔记的原因则比较可笑，因为我基本上都是使用英文记录 Science \u0026amp; Tech 方面的笔记，我并没有配置 Emacs 的中文环境。所以需要使用中文来写东西时，我自然就得换用其他工具。这段时间准备面试，将 org-mode 的使用范围扩大到记录面试适宜，由于一亩三分地是一个主要资料来源，不免需要粘贴许多中文帖子进来。这时再将 Emacs 视为一个纯英文环境未免有些麻烦。而将 Emacs 中文化了，自然也不需要 MWeb 和 Notes 或者 Bear 什么事了。\n而记录餐馆和消费的需求比较麻烦，本文暂且搁置，今后有空再来研究。\n","tags":["Emacs","lisp","pyim"],"title":"Emacs configuration with support for Chinese input","type":"post"},{"authors":null,"categories":null,"content":"","date":1562175840,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1568868846,"objectID":"a802c7c6b5d1343eca774f5ac07591f2","permalink":"/publication/wei-2016-bi/","publishdate":"2016-06-03T13:44:05-07:00","relpermalink":"/publication/wei-2016-bi/","section":"publication","summary":"","tags":null,"title":"Yang Wei, Petr Kuzmič, Runhan Yu, Gyan Modi, Lizbeth Hedstrom. Inhibition of Inosine-5'-Monophosphate Dehydrogenase from Bacillus Anthracis: Mechanism Revealed by Pre-Steady-State Kinetics. Biochemistry 2016, 55 (37), 5279-5288.","type":"publication"},{"authors":null,"categories":null,"content":"• Provide smooth transition from accounting app to plain text accounting tools.\n• Convert .csv file exported from Sui accounting app to a Beancount text ledger.\n• Feature a lisp function to quickly add transactions into Beancount using Emacs.\n","date":1552671840,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1568868847,"objectID":"271af0a466a0e046662c06471647f7a1","permalink":"/project/csv2bean/","publishdate":"2019-03-15T13:44:00-04:00","relpermalink":"/project/csv2bean/","section":"project","summary":"• Provide smooth transition from accounting app to plain text accounting tools.\n• Convert .csv file exported from Sui accounting app to a Beancount text ledger.\n• Feature a lisp function to quickly add transactions into Beancount using Emacs.","tags":["Python","lisp"],"title":"CSV2Bean","type":"project"},{"authors":null,"categories":null,"content":"• Extracted cancer research data from the Cancer Genome Atlas Network \u0026reg;.\n• Applied GISTIC clustering analysis to patient-indexed tables to identify molecular subgroups (Bioinformatics).\n• Mapped gene list with biological annotations with functional annotation tool DAVID (Python).\n• Summarized and visualized stomach cancer-related gene candidates with R package MAFtools \u0026reg;.\n","date":1552671840,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1568868943,"objectID":"e9c86f4f6fc91fbed11c96ab51d9b69c","permalink":"/project/gistic/","publishdate":"2019-03-15T13:44:00-04:00","relpermalink":"/project/gistic/","section":"project","summary":"• Extracted cancer research data from the Cancer Genome Atlas Network \u0026reg;.\n• Applied GISTIC clustering analysis to patient-indexed tables to identify molecular subgroups (Bioinformatics).\n• Mapped gene list with biological annotations with functional annotation tool DAVID (Python).\n• Summarized and visualized stomach cancer-related gene candidates with R package MAFtools \u0026reg;.","tags":["Python","R"],"title":"Gene Variation Analysis of Stomach Cancer","type":"project"},{"authors":null,"categories":null,"content":"• Write a class to handle multithreading website crawling inside the given domain.\n• Feature a breath-first search algorithm and a multithread pool to visit all urls asynchronously.\n• Handle various status code, time-out and exceptions in a structured manner.\n","date":1552671840,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1568868847,"objectID":"52daf2516098d81932056e4cb108ca6c","permalink":"/project/multicrawler/","publishdate":"2019-03-15T13:44:00-04:00","relpermalink":"/project/multicrawler/","section":"project","summary":"• Write a class to handle multithreading website crawling inside the given domain.\n• Feature a breath-first search algorithm and a multithread pool to visit all urls asynchronously.\n• Handle various status code, time-out and exceptions in a structured manner.","tags":["Python"],"title":"Multithread Web Crawler","type":"project"},{"authors":null,"categories":null,"content":"• Provide a personalized websites collection and naviation page.\n• Built with Javascript, CSS and npm.\n","date":1552671840,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1568868847,"objectID":"7c77c3c6991c0eeb0490bfc9a77c9b9c","permalink":"/project/navpage/","publishdate":"2019-03-15T13:44:00-04:00","relpermalink":"/project/navpage/","section":"project","summary":"• Provide a personalized websites collection and naviation page.\n• Built with Javascript, CSS and npm.","tags":["Javascript"],"title":"NavPage","type":"project"},{"authors":null,"categories":null,"content":" • Developed an ETL pipeline to extract, integrate and transform prescription data from multiple providers in AWS cloud computing to enable nation-wide queries on prescription drug usage (Python, AWS, Airflow).\n• Validated and combined public available Medicaid and Medicare datasets with NIH, FDA and NPPES sources into a SQL queryable databases in Redshift, visualized in website (Redshift, Tableau, JavaScript, CSS).\n• Implemented custom connector to Redshift/PostgreSQL with 20 times more efficiency (Python).\nRxMiner RxMiner is a scalable data pipeline for prescription drug analytics that standardizes Medicaid and Medicare prescriptions using NIH drug, FDA drug, and NEPPS provider information.\nOverview With a switch to electronic prescriptions, healthcare and insurance companies are providing large drug usage datasets. However, since each provider has their own way to log prescriptions the data sets are non-standard. Using publicly available drug datasets, RxMiner standardizes and joins prescription datasets.\nRxMiner features:\n 100 million standardized prescriptions queryable in Redshift Automated ingestion of Medicaid, Medicare, NIH, FDA and NEPPS data Validation of prescriptions against NIH, FDA and NEPPS Union of prescription from Medicaid and Medicare  RxMiner is scalable and built on Amazon S3, EC2, and Redshift on AWS. Tableau can be used to visualize and analyze the standardized dataset or each data source.\n   Requirments  Python 3.7 Amazon AWS Account SODA API  Installation Clone the RxMiner project to your local computer or `m4.4xlarge` EC2 instance and install awscli and other requirements.\ngit clone https://github.com/ziyunch/RxMiner.git pip install awscli pip install ./requirements.txt  Next add the following credentials as environment variables to your ~/.bash_profile.\n# AWS Credentials export AWS_BUCKET_NAME=XXXX export AWS_ACCESS_KEY_ID=XXXX export AWS_SECRET_ACCESS_KEY=XXXX # SODA API export SODAPY_APPTOKEN=XXXX # Redshift configuration export REDSHIFT_USER=XXXX export REDSHIFT_PASSWORD=XXXX export REDSHIFT_HOST_IP=XXXX export REDSHIFT_PORT=XXXX export REDSHIFT_DATABASE=XXXX # PostgreSQL configuration export POSTGRESQL_USER=XXXX export POSTGRESQL_PASSWORD=XXXX export POSTGRESQL_HOST_IP=XXXX export POSTGRESQL_PORT=XXXX export POSTGRESQL_DATABASE=XXXX  Source the .bash_profile when finished.\nsource ~/.bash_profile  Then import data into S3 bucket.\n. ./deployment/import.sh  Ingest data and stage them in SQL database.\n. ./deployment/ingest.sh  Prepare sample table based on queries.\n. ./deployment/sql.sh  Getting Started Open the website at http://rxminer.net. Four graphs are shown in the interactive dashboard. On the top is the market size of all or chosen drugs over the states. Bottom left shows the Top 10 categories of drugs shared most markets for the whole nation or chosen state. Bottom middle shows the market of each drug in the descending order. Bottom right shows the drug usage for each year.\nThe sample visualization of national drug usage during 2013-2016 was also published on Tableau public server.\nThe standardized dataset or each data source could be connected by Tableau Desktop 2018.3 or other data analysis or visualization tools.\nCredits RxMiner was built as a project at Insight Data Engineering in the Winter 2019 session by Runhan Yu. It is availble as open source and is free to use and modify by anyone.\n","date":1552671840,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1568868952,"objectID":"86125b418caf910ccf1a41e040625819","permalink":"/project/rxminer/","publishdate":"2019-03-15T13:44:00-04:00","relpermalink":"/project/rxminer/","section":"project","summary":"• Developed an ETL pipeline to extract, integrate and transform prescription data from multiple providers in AWS cloud computing to enable nation-wide queries on prescription drug usage (Python, AWS, Airflow).\n• Validated and combined public available Medicaid and Medicare datasets with NIH, FDA and NPPES sources into a SQL queryable databases in Redshift, visualized in website (Redshift, Tableau, JavaScript, CSS).\n• Implemented custom connector to Redshift/PostgreSQL with 20 times more efficiency (Python).","tags":["Python"],"title":"RxMiner","type":"project"},{"authors":null,"categories":null,"content":"","date":1499103840,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1568868846,"objectID":"2b4eaefb734740f7b104b025aefa068a","permalink":"/publication/an-2017-oncotarget/","publishdate":"2017-06-03T13:44:05Z","relpermalink":"/publication/an-2017-oncotarget/","section":"publication","summary":"","tags":null,"title":"Ann P Lawson, Daniel W Bak, D Alexander Shannon, Marcus JC Long, Tushara Vijaykumar, Runhan Yu, Farid El Oualid, Eranthie Weerapana, Lizbeth Hedstrom. Identification of deubiquitinase targets of isothiocyanates using SILAC-assisted quantitative mass spectrometry. Oncotarget. 2017, 8(31) 51296–51316.","type":"publication"},{"authors":null,"categories":null,"content":"","date":1467567840,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1568868846,"objectID":"ef69a35624dfb3b6aa4bc3017f5734c0","permalink":"/publication/yu-2016-bi/","publishdate":"2016-06-03T13:44:05Z","relpermalink":"/publication/yu-2016-bi/","section":"publication","summary":"","tags":null,"title":"Runhan Yu, Youngchang Kim, Natalia Maltseva, Philip Braunstein, Andrzej Joachimiak, Lizbeth Hedstrom. Oxanosine Monophosphate Is a Covalent Inhibitor of Inosine 5'-Monophosphate Dehydrogenase. Chemical Research in Toxicology 2019, 32 (3) , 456-466.","type":"publication"},{"authors":null,"categories":null,"content":"","date":1372873440,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1568868846,"objectID":"ebbe113e12bb8ed04d0204603cf89350","permalink":"/publication/zou-2013-chemphyschem/","publishdate":"2013-08-26T13:44:05Z","relpermalink":"/publication/zou-2013-chemphyschem/","section":"publication","summary":"","tags":null,"title":"Fang Zou, Runhan Yu, Rongguan Li, Wei Li. Microwave-Assisted Synthesis of HKUST-1 and Functionalized HKUST-1-@ H3PW12O40: Selective Adsorption of Heavy Metal Ions in Water Analyzed with Synchrotron Radiation. ChemPhysChem. 2013, 14(12) 2825-2832.","type":"publication"}]